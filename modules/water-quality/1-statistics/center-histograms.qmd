---
title: "Using Python for Statistics"
format: live-html
sidebar: lesson-1
---
As you might have guessed, Python can do much more than just the functions **len()**, **min()**, and **max()**. In fact, it can help us calculate our measures of center!

You have already calculated the mean and median by hand on your lab sheet. Now, let's ask Python to do it!

## Calculating Statistics With Python

### Mean

Python has built-in tools to calculate the mean. We'll use something called **NumPy** (Numerical Python). NumPy is one example of a *library* or *package* that you can add to Python. When you add a library to Python, you are increasing the functions availble to you. For example, we have many more options with NumPy than just **len()**, **min()**, and **max()**.

We have to "import" these libraries in Python and then often give them a nickname. For example, we import NumPy as `np` instead of typing "numpy" all the time.

```{python}
import numpy as np

# Same sample dataset
sample_data = [1, 2, 6, 5, 1]

# Calculate mean the easy way!
mean_sample = np.mean(sample_data)

print("mean of sample data:", mean_sample)
```

**Breaking it down:**  
- `import numpy as np` = Load the NumPy library/package (we only do this once)  
- `np.mean()` = NumPy's function to calculate mean

## Your Turn: Calculate Your Group's Mean Nitrate
The website doesn't save your nitrate readings list from the previous page, so you'll need to re-enter your data into the list below (Line 4) again.

```{pyodide}
import numpy as np

# Recreate the list of your group's nitrate readings below
group_nitrate = [10, 20, 30, 40]

# YOUR TURN: Calculate the mean nitrate reading for your group
mean_nitrate = np.mean(group_nitrate)

print("Group nitrate readings (mg/L):", group_nitrate)
print("Group mean nitrate:", mean_nitrate, "mg/L")

# Is it safe? (Remember: safe is less than 10 mg/L)
if mean_nitrate < 10:
    print("âœ“ Average nitrate is SAFE")
else:
    print("âœ— Average nitrate is TOO HIGH")

# Try changing the numbers and see what happens!
```

## Class Data
One of the benefits of using Python is that is can handle much larger amount amounts of data with ease. For example, let's consider the nitrate and nitrite data your whole class collected. We'll do that by importing the data collected in the Google Form. That form sends the data to a spreadsheet, or CSV (comman separated values) file.

:::{.callout-important}
## Your teacher will provide the link to the CSV file for you to use.
:::

Only edit the CSV URL in the code below. The rest is written for you. This will pull the class nitrate and nitrite data from the CSV file so you can use it later down the page.

```{pyodide}
import requests
import csv
from io import StringIO

# Replace the url with the one provided from your teacher. Make sure to keep the quotation marks!
csv_url = "www.replace_this_with_your_csv_url.csv"

# Get the data
response = requests.get(csv_url)
reader = csv.reader(StringIO(response.text))
next(reader)  # Skip header row

# Read all rows
rows = list(reader)

# Extract columns (change the index numbers to match your columns)
class_nitrate = [int(row[3]) for row in rows]  # Fourth column (index 3)
class_nitrite = [int(row[4]) for row in rows]  # Fifth column (index 4)

print("Nitrate values:", class_nitrate)
print("Nitrite values:", class_nitrite)
```


### Calculating the Class Nitrate and Nitrate Mean

Using the code written to calculate the mean for your group's nitrate data, modify it to calculate the class nitrate and nitrite means.

```{pyodide}
import numpy as np

# Calculate mean nitrate and nitrite for class data (replace the ???)
mean_class_nitrate = np.mean(???)
mean_class_nitrite = np.mean(???)

print("Class nitrate:", mean_class_nitrate, "mg/L")
print("Class nitrite:", mean_class_nitrite, "mg/L")
```

### Calculating the Class Nitrate and Nitrite Median

Similarly, calculate the median for the class nitrate and nitrite data.

```{pyodide}
# Calculate median nitrate and nitrite for class data (replace the ???)
median_class_nitrate = np.median(???)
median_class_nitrite = np.median(???)

print("Class nitrate median:", median_class_nitrate, "mg/L")
print("Class nitrite median:", median_class_nitrite, "mg/L")
```

## Visualizing the Data & Measures of Center

Let's see what the mean looks like on a graph:
```{python}
import matplotlib.pyplot as plt
import numpy as np

# Example: pH readings from a creek over one week
days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
ph_readings = [7.2, 7.4, 7.1, 7.3, 7.2, 7.3, 7.2]

# Calculate mean
mean_ph = np.mean(ph_readings)

# Create a graph
plt.figure(figsize=(10, 6))
plt.plot(days, ph_readings, marker='o', markersize=10, linewidth=2, label='Daily pH')
plt.axhline(y=mean_ph, color='red', linestyle='--', linewidth=2, label=f'Mean = {mean_ph:.2f}')
plt.xlabel('Day of Week', fontsize=12)
plt.ylabel('pH Level', fontsize=12)
plt.title('Creek pH Over One Week', fontsize=14)
plt.legend(fontsize=11)
plt.grid(True, alpha=0.3)
plt.ylim(6.5, 8)

# Add safe zone
plt.axhline(y=6.5, color='green', linestyle=':', alpha=0.5)
plt.axhline(y=8.5, color='green', linestyle=':', alpha=0.5)
plt.fill_between(range(len(days)), 6.5, 8.5, alpha=0.1, color='green', label='Safe zone')

plt.show()

print(f"The red dashed line shows the mean pH: {mean_ph:.2f}")
print("Notice how the mean is in the 'middle' of all the points!")
```

## Quick Reference: Python Functions

| Function | What It Does | Example |
|----------|-------------|---------|
| `np.mean()` | Calculates average | `np.mean([7.1, 7.2, 7.3])` = 7.2 |
| `np.std()` | Calculates standard deviation | `np.std([7.1, 7.2, 7.3])` = 0.082 |
| `len()` | Counts items | `len([1, 2, 3])` = 3 |
| `sum()` | Adds items | `sum([1, 2, 3])` = 6 |

## Key Takeaways

- ðŸ“Š **Mean** = Average value (add them up, divide by how many)
- ðŸ“ **Standard Deviation** = How spread out the data is
- âœ… Small SD = Consistent, stable readings (usually good!)
- âš ï¸ Large SD = Variable readings (investigate why!)
- ðŸ”§ Python makes calculating these MUCH easier than by hand
- ðŸŒŠ Soon you'll use real buoy data with hundreds of measurements!

## Practice Challenge

Look at these example pH readings from a creek: **[7.2, 7.1, 7.3, 7.2, 7.1]**

Before running the code, try to guess:
1. Will the mean be closer to 7.0 or 7.5?
2. Will the standard deviation be big or small?

Then run the code to check:
```{pyodide}
import numpy as np

ph = [7.2, 7.1, 7.3, 7.2, 7.1]

print("Mean:", np.mean(ph))
print("Standard Deviation:", np.std(ph))

# Were you close? Try changing the numbers to see what happens!
```

**Next up:** We'll learn about the median - another way to find the "middle" that's sometimes better than the mean!