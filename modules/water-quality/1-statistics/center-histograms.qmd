---
title: "Using Python for Statistics"
crossref:
  lst-title: "ðŸŽ¯ Checkpoint"
format: live-html
sidebar: lesson-1
---
:::{.ltblue-container}
**Checkpoints on this Page:**

- [**Checkpoint 1:** Calculating Group Mean Nitrate](#lst-groupmeannitrate)
- [**Checkpoint 2:** Import Class Data](#lst-getcsv)
- [**Checkpoint 3:** Calculate Means for Class Data](#lst-classmeannitratenitrite)
- [**Checkpoint 4:** Calculate Medians for Class Data](#lst-classmediannitratenitrite)
- [**Checkpoint 5:** Create Class Nitrate Histogram](#lst-classnitratehistogram)
- [**Checkpoint 6:** Create Class Nitrite Histogram](#lst-classnitritehistogram)
:::

As you might have guessed, Python can do much more than just the functions **len()**, **min()**, and **max()**. In fact, it can help us calculate our measures of center!

You have already calculated the mean and median by hand on your lab sheet. Now, let's ask Python to do it!

## Calculating Statistics With Python

### Mean

Python has built-in tools to calculate the mean. We'll use something called **NumPy** (Numerical Python). NumPy is one example of a *library* or *package* that you can add to Python. When you add a library to Python, you are increasing the functions availble to you. For example, we have many more options with NumPy than just **len()**, **min()**, and **max()**.

We have to "import" these libraries in Python and then often give them a nickname. For example, we import NumPy as `np` instead of typing "numpy" all the time. An example of how this work has been written (and already run) below.

```{pyodide}
#| edit: false
import numpy as np

# Same sample dataset
sample_data = [1, 2, 6, 5, 1]

# Calculate mean the easy way!
mean_sample = np.mean(sample_data)

print("mean of sample data:", mean_sample)
```

**Breaking it down:**  
- `import numpy as np` = Load the NumPy library/package (we only do this once per file/page)  
- `np.mean()` = NumPy's function to calculate mean

## Your Turn: Calculate Your Group's Mean Nitrate
The website doesn't save your nitrate readings list from the previous page, so you'll need to re-enter your data into the list below (Line 4) again.

:::{#lst-groupmeannitrate}

**YOUR TURN:**  
- Recreate the list of your group's nitrate readings below  
- Run the block

```{pyodide}
#| persist: true
#| completion: false
# Recreate the list of your group's nitrate readings below

group_nitrate = [10, 20, 30, 40]

mean_nitrate = np.mean(group_nitrate)

print("Group nitrate readings (mg/L):", group_nitrate)
print("Group mean nitrate:", mean_nitrate, "mg/L")

# Is it safe? (Remember: the EPA's limit is less than 10 mg/L)
if mean_nitrate < 10:
    print("âœ“ Average nitrate is SAFE")
else:
    print("âœ— Average nitrate is TOO HIGH")

# Try changing the numbers and see what happens!
```

Calculate and check your group's mean nitrate concentration.
:::

## Class Data
One of the benefits of using Python is that is can handle much larger amount amounts of data with ease. For example, let's consider the nitrate and nitrite data your whole class collected. We'll do that by importing the data collected in the Google Form. That form sends the data to a spreadsheet, or CSV (comman separated values) file.

:::{#lst-getcsv}

:::{.callout-important}
## Your teacher will provide the link to the CSV file for you to use.
:::

Only edit the CSV URL in the code below (Line 6). The rest is written for you. This will pull the class nitrate and nitrite data from the CSV file so you can use it later down the page.

```{pyodide}
#| include: false
import requests
import csv
from io import StringIO

def load_class_data(csv_url):
    response = requests.get(csv_url)
    reader = csv.reader(StringIO(response.text))
    next(reader)  # Skip header
    rows = list(reader)
    
    class_nitrate = [int(row[3]) for row in rows]
    class_nitrite = [int(row[4]) for row in rows]
    
    return class_nitrate, class_nitrite
```

```{pyodide}
#| persist: true
#| completion: false
# Replace the url with the one provided from your teacher. 
# Make sure to keep the quotation marks!

csv_url = "www.replace_this_with_your_csv_url.csv"

class_nitrate, class_nitrite = load_class_data(csv_url)

print("Nitrate values:", class_nitrate)
print("Nitrite values:", class_nitrite)
```

Import your whole class's nitrate and nitrite data.
:::

### Calculating the Class Nitrate and Nitrate Mean

Using the code written to calculate the mean for your group's nitrate data, modify it to calculate the class nitrate and nitrite means.

:::{#lst-classmeannitratenitrite}

```{pyodide}
#| persist: true
#| completion: false
# Calculate mean nitrate and nitrite for class data (replace the ???)

mean_class_nitrate = np.mean(???)
mean_class_nitrite = np.mean(???)

print("Class nitrate:", mean_class_nitrate, "mg/L")
print("Class nitrite:", mean_class_nitrite, "mg/L")
```

Calculate the class nitrate and nitrite means.
:::

### Calculating the Class Nitrate and Nitrite Median

Similarly, calculate the median for the class nitrate and nitrite data.

:::{#lst-classmediannitratenitrite}

```{pyodide}
#| persist: true
#| completion: false
# Calculate median nitrate and nitrite for class data (replace the ???)

median_class_nitrate = np.median(???)
median_class_nitrite = np.median(???)

print("Class nitrate median:", median_class_nitrate, "mg/L")
print("Class nitrite median:", median_class_nitrite, "mg/L")
```

Calculate the class nitrate and nitrite medians.
:::

## Visualizing the Data & Measures of Center

### Histograms By Hand
A key practice in statistics is to visualize the data! One of the main types of plots we can use to do this is a **histogram**. A histogram uses bins to group the data and then plots the number of observations in each bin.

:::{.callout-note}
## *Data Recorder (Sticky Notes)*
Grab those sticky notes from the lab!
:::

On the wall, you will find two areas prepared for your stickies. One has an axis binned for nitrates (look for a max value of 50+) and the other has an axis binned for nitrites (look for a max value of 10+). 

Place your stickies in the correct bin, putting your nitrate values on the nitrate graph and the nitrite values on the nitrite graph.

![](images/sticky-note-histograms.png)

### Histograms with Python
Python can also make histograms! Run the code blocks below to see a histogram of the class nitrate value (block #1) and the class nitrite values (block #2). Do the histograms look similar to the plots we made by hand?

#### Histogram for Class Nitrate Readings

:::{#lst-classnitratehistogram}

```{pyodide}
#| completion: false
import matplotlib.pyplot as plt

plt.figure(figsize=(10, 6))
plt.hist(class_nitrate, bins=10, edgecolor='black', color='plum')
plt.xlabel('Nitrate Level (mg/L)')
plt.ylabel('Frequency')
plt.title('Class Nitrate Readings')
plt.grid(True, alpha=0.3)
plt.show()
```

Create class nitrate histogram.
:::

##### Add Mean and Median
Add the mean and median to the nitrate histogram.
```{pyodide}
#| completion: false
plt.figure(figsize=(10, 6))
plt.hist(class_nitrate, bins=10, edgecolor='black', color='plum')

# Add vertical lines with labels in legend
plt.axvline(mean_class_nitrate, color='red', linestyle='--', linewidth=2, 
            label=f'Mean: {mean_class_nitrate:.1f}')
plt.axvline(median_class_nitrate, color='blue', linestyle='--', linewidth=2, 
            label=f'Median: {median_class_nitrate:.1f}')

plt.xlabel('Nitrate Level (mg/L)')
plt.ylabel('Frequency')
plt.title('Class Nitrate Readings')
plt.legend(loc='upper right')
plt.grid(True, alpha=0.3)
plt.show()
```

#### Histogram for Class Nitrite Readings

:::{#lst-classnitritehistogram}

```{pyodide}
#| completion: false
plt.figure(figsize=(10, 6))
plt.hist(class_nitrite, bins=10, edgecolor='black', color='lemonchiffon')
plt.xlabel('Nitrite Level (mg/L)')
plt.ylabel('Frequency')
plt.title('Class Nitrite Readings')
plt.grid(True, alpha=0.3)
plt.show()
```

Create class nitrite histogram.
:::

##### Add Mean and Median
Add the mean and median to the nitrite histogram.

```{pyodide}
#| completion: false
plt.figure(figsize=(10, 6))
plt.hist(class_nitrite, bins=10, edgecolor='black', color='lemonchiffon')

# Add vertical lines with labels in legend
plt.axvline(mean_class_nitrite, color='red', linestyle='--', linewidth=2, 
            label=f'Mean: {mean_class_nitrite:.1f}')
plt.axvline(median_class_nitrite, color='blue', linestyle='--', linewidth=2, 
            label=f'Median: {median_class_nitrite:.1f}')

plt.xlabel('Nitrite Level (mg/L)')
plt.ylabel('Frequency')
plt.title('Class Nitrite Readings')
plt.legend(loc='upper right')
plt.grid(True, alpha=0.3)
plt.show()
```

:::{.callout-caution}
## Question!
What do you notice about the relationship between the mean and median on the nitrate and nitrite histograms? Why do you think that might be?
:::

## Quick Reference: Python Functions

| Function | What It Does | Example |
|----------|-------------|---------|
| `np.mean()` | Calculates average | `np.mean([7.1, 7.2, 7.3])` = 7.2 |
| `np.median()` | Calculates median | `np.median([7.1, 7.2, 7.3])` = 7.2 |
| `len()` | Counts items | `len([1, 2, 3])` = 3 |
| `max()` | Finds maximum | `max([1, 2, 3])` = 3 |
| `min()` | Finds minimum | `min([1, 2, 3])` = 1 |


